<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <title>Gi√° b·∫°c - Kim Ho√†ng B·∫£y Chanh</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Chuy√™n c√°c s·∫£n ph·∫©m b·∫°c uy t√≠n, ch·∫•t l∆∞·ª£ng, giao h√†ng nhanh to√†n qu·ªëc. ƒê·ªïi tr·∫£ d·ªÖ d√†ng, t∆∞ v·∫•n t·∫≠n t√¢m.">
  <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/3176/3176367.png">
  <style>
    :root {
      --blue: #2196f3;
      --blue-dark: #1976d2;
      --blue-light: #e3f2fd;
      --white: #fff;
      --gray: #fafafa;
      --shadow: 0 4px 20px #1976d227;
    }
    body {
      background: var(--gray);
      color: #222;
      font-family: 'Segoe UI', Arial, sans-serif;
      margin: 0; padding: 0;
    }
    h1 {
      color: var(--blue-dark);
      text-align: center;
      font-size: 2.7em;
      margin: 30px 0 10px 0;
      letter-spacing: 2px;
      font-weight: bold;
    }
    #promo-banner {
      background: linear-gradient(90deg, #e3f2fd 60%, #bbdefb 100%);
      color: #1976d2;
      padding: 14px 0;
      font-size: 1.15em;
      text-align: center;
      font-weight: bold;
      box-shadow: 0 4px 20px #1976d227;
      border-bottom: 2px solid #1976d2;
    }
    #contact-bar {
      background: var(--blue-light);
      color: var(--blue-dark);
      text-align: center;
      font-size: 1.13em;
      padding: 10px 0;
      border-bottom: 1.5px solid var(--blue);
      box-shadow: 0 2px 12px #1976d211;
    }
    #contact-bar a, #contact-bar .gmail {
      color: var(--blue-dark);
      font-weight: bold;
      text-decoration: none;
      margin: 0 8px;
      transition: color .15s;
    }
    #contact-bar a:hover, #contact-bar .gmail:hover { color: var(--blue);}
    #policy-link {
      text-align:center;
      margin: 18px 0 10px 0;
    }
    #policy-link a {
      color: var(--blue-dark);
      font-weight: bold;
      font-size: 1.08em;
      text-decoration: none;
      border-bottom: 2px solid var(--blue);
      padding-bottom: 2px;
      transition: color .18s, border .18s;
    }
    #policy-link a:hover { color: var(--blue); border-color: var(--blue);}
    #search-bar {
      text-align:center;
      margin: 28px 0 16px 0;
    }
    #search-bar input[type="text"] {
      width:300px; padding:12px; border-radius:8px; border:1.5px solid var(--blue-dark);
      background: var(--white); color: #222;
      font-size:1em; max-width:90vw; outline: none;
      margin-right: 6px;
      box-shadow: 0 2px 12px #1976d211;
      transition: border .18s;
    }
    #search-bar input[type="text"]:focus {
      border-color: var(--blue);
    }
    #search-bar button {
      padding:12px 28px;
      border-radius:8px;
      background: linear-gradient(90deg, var(--blue), var(--blue-dark));
      color: var(--white);
      font-weight:bold;
      border:none;
      cursor:pointer;
      font-size:1em;
      transition:background .18s, color .18s, box-shadow .18s;
      box-shadow: 0 2px 8px #1976d255;
    }
    #search-bar button:hover {
      background: linear-gradient(90deg, #42a5f5, #1976d2);
      color: var(--white);
      box-shadow: 0 6px 22px #1976d244;
    }
    #featured-products, #testimonials, #catalogue, #policy, #address {
      border-radius: 16px;
      margin: 30px auto 24px;
      box-shadow: var(--shadow);
      background: var(--white);
      padding: 24px 20px;
      max-width: 950px;
    }
    #featured-products h2, #testimonials h2 {
      color: var(--blue);
      text-align: center;
      margin-bottom: 22px;
      font-size: 2em;
      letter-spacing: 1.5px;
    }
    #featured-list {
      display:flex; flex-wrap:wrap; gap:24px; justify-content:center;
    }
    .featured-item {
      background: var(--blue-light);
      border-radius: 14px;
      box-shadow: 0 3px 16px #1976d211;
      padding: 18px 10px;
      text-align: center;
      width: 220px;
      max-width: 95vw;
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: transform .17s, box-shadow .17s;
    }
    .featured-item:hover {
      transform: translateY(-5px) scale(1.03);
      box-shadow: 0 8px 28px #1976d233;
    }
    .featured-item img {
      width: 190px; height: 190px; object-fit:cover;
      border-radius: 10px;
      background: var(--white);
      margin-bottom: 10px;
      border: 2px solid var(--blue);
      box-shadow: 0 2px 10px #1976d211;
      transition: transform .15s;
    }
    .featured-item:hover img { transform:scale(1.05);}
    .badge-hot {
      display:inline-block;
      background: var(--blue);
      color: var(--white);
      font-size:1em; font-weight:bold;
      padding: 4px 14px;
      border-radius: 8px;
      margin-bottom: 9px;
      letter-spacing: 1px;
      box-shadow: 0 2px 8px #1976d211;
    }
    .order-btn, #popup-mess {
      margin-top:13px;
      background: linear-gradient(90deg, var(--blue), var(--blue-dark));
      color: var(--white);
      font-weight: bold;
      padding: 12px 32px;
      border-radius: 8px;
      font-size: 1.08em;
      text-decoration: none;
      border: none;
      cursor: pointer;
      box-shadow: 0 3px 12px #1976d255;
      transition: background .17s, color .15s, box-shadow .14s;
    }
    .order-btn:hover, #popup-mess:hover {
      background: linear-gradient(90deg, #42a5f5, #1976d2);
      color: var(--white);
      box-shadow: 0 10px 30px #1976d288;
    }
    #testimonials-list {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }
    .testimonial {
      background: var(--blue-light);
      border-radius: 12px;
      box-shadow: 0 2px 10px #1976d211;
      padding: 19px 16px;
      width: 260px;
      font-size: 1.07em;
      color: var(--blue-dark);
      line-height: 1.6;
    }
    #catalogue {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;   /* CƒÉn gi·ªØa ngang */
      align-items: center;       /* CƒÉn gi·ªØa d·ªçc n·∫øu c·∫ßn */
      gap: 32px;
      margin: 40px 0 10px 0;
      padding: 0 8px;
      background: var(--white);
      min-height: 120px;
    }
    .catalogue-item {
      background: var(--blue-light);
      border-radius: 16px;
      padding: 36px 44px;
      font-size: 2em;
      font-weight: bold;
      color: var(--blue-dark);
      cursor: pointer;
      box-shadow: 0 2px 8px #1976d211, 0 2px 12px #1976d211;
      text-align: center;
      border: 2px solid var(--blue);
      min-width:120px;
      transition: background .16s, color .16s, transform .14s, box-shadow .16s;
    }
    .catalogue-item:hover {
      background: var(--blue);
      color: var(--white);
      transform: translateY(-5px) scale(1.03);
      border: 2px solid var(--blue-dark);
      box-shadow: 0 8px 32px #1976d244;
    }
    #filter-area {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 12px;
      margin: 19px 0 10px 0;
      flex-wrap: wrap;
    }
    .filter-btn {
      background: var(--blue-light);
      border: 2px solid var(--blue);
      color: var(--blue-dark);
      font-weight: bold;
      font-size: 1em;
      border-radius: 7px;
      padding: 10px 22px;
      cursor: pointer;
      margin-bottom: 6px;
      transition: background .15s, color .15s, border .15s, box-shadow .15s;
      box-shadow: 0 2px 8px #1976d211;
    }
    .filter-btn.selected,.filter-btn:hover {
      background: var(--blue);
      color: var(--white);
      border: 2px solid var(--blue-dark);
      box-shadow: 0 4px 16px #1976d222;
    }
    #data {
      display: grid;
      grid-template-columns: repeat(2,1fr);
      gap: 28px 28px;
      justify-items: center;
      align-items: start;
      margin-bottom: 16px;
      padding: 0 8px;
    }
    .item {
      display: flex;
      flex-direction: column;
      align-items: center;
      background: var(--blue-light);
      padding: 26px 16px;
      border-radius: 16px;
      box-shadow: 0 4px 16px #1976d211;
      width: 420px;
      max-width: 98vw;
      position: relative;
      transition: transform .18s, box-shadow .13s, opacity .28s, filter .28s;
      opacity: 0.97;
    }
    .item.show {
      opacity:1;
      transform: translateY(0) scale(1);
    }
    .item:hover {
      transform: translateY(-7px) scale(1.02);
      box-shadow: 0 12px 38px #1976d233, 0 2px 12px #1976d211;
      opacity: 1;
    }
    .item img {
      width: 370px;
      height: 370px;
      margin-bottom: 18px;
      object-fit: cover;
      cursor: pointer;
      border-radius: 12px;
      box-shadow: 0 2px 10px #1976d211;
      border: 2px solid var(--blue);
      max-width: 96vw;
      aspect-ratio: 1/1;
      background: var(--white);
      transition: transform .13s;
    }
    .item:hover img { transform: scale(1.04);}
    .item p {
      margin: 0;
      font-size: 1.27em;
      color: var(--blue-dark);
      line-height: 1.5;
      text-align: center;
      word-break: break-word;
    }
    #pagination {
      text-align: center;
      margin: 24px 0 10px 0;
    }
    #pagination button {
      padding: 10px 20px;
      font-size: 1.1em;
      margin: 0 10px;
      border: none;
      background: linear-gradient(90deg, var(--blue), var(--blue-dark));
      color: var(--white);
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      box-shadow: 0 2px 8px #1976d211;
      transition: background .13s, box-shadow .14s;
    }
    #pagination button:disabled {
      background: #aaa;
      cursor: not-allowed;
      color: #fff;
      box-shadow: none;
    }
    #pagination span {
      font-size: 1.2em;
      margin: 0 8px;
      font-weight: bold;
      color: var(--blue-dark);
    }
    #backbtn {
      display: inline-block;
      margin: 22px 0 7px 25px;
      padding: 12px 26px;
      font-size: 1.1em;
      background: var(--blue-light);
      color: var(--blue-dark);
      border: 2px solid var(--blue);
      border-radius: 9px;
      cursor: pointer;
      font-weight: bold;
      transition: background .13s, color .13s;
    }
    #backbtn:hover { background: var(--blue); color: var(--white);}
    #policy {
      max-width: 650px;
      background: var(--blue-light);
      color: var(--blue-dark);
      border-radius: 14px;
      box-shadow: 0 2px 12px #1976d222;
      padding: 38px 22px;
    }
    #policy h2 { color: var(--blue); margin-top: 0;}
    #policy ul { font-size: 1.12em; line-height: 1.7; padding-left: 18px;}
    #order-popup {
      opacity:0; pointer-events:none; transition:opacity 0.25s; display:none;
      align-items:center; justify-content:center;
      position:fixed; left:0; top:0; width:100vw; height:100vh;
      background:rgba(33,150,243,0.15); z-index:99;
    }
    #order-popup.show {opacity:1; pointer-events:auto; display:flex;}
    #order-popup .popup-inner {
      background: var(--white);
      min-width:320px; max-width:96vw; padding:30px 20px;
      border-radius:12px; box-shadow: 0 2px 14px #1976d211;
      text-align: center; position: relative;
      transform: scale(0.88); opacity: 0;
      transition: all .23s cubic-bezier(.23,1.24,.4,1);
    }
    #order-popup.show .popup-inner { transform:scale(1); opacity:1;}
    #order-popup .popup-inner button.close {
      position:absolute; top:8px; right:12px; background:none; border:none;
      font-size:2em; color: var(--blue-dark); cursor:pointer;
    }
    #loader {display:none; justify-content:center; align-items:center; margin:30px 0;}
    .skeleton {
      background: var(--blue-light);
      border-radius: 10px;
      margin: 12px auto;
      width: 90vw; max-width:410px; height:360px;
      animation: skel 1.2s infinite linear;
      box-shadow: 0 2px 12px #1976d211;
    }
    @keyframes skel {0%{opacity:.8;}50%{opacity:.4;}100%{opacity:.8;}}
    .scroll-fade { opacity:0; transform:translateY(60px); transition:all 0.7s cubic-bezier(.2,.8,.4,1.1);}
    .scroll-fade.visible { opacity:1; transform:translateY(0);}
    #address {
      max-width: 600px; margin:32px auto 32px;
      background: var(--blue-light);
      color: var(--blue-dark);
      padding: 22px 18px 22px 60px;
      border-radius:14px;
      box-shadow: 0 2px 14px #1976d211;
      position:relative; font-size:1.15em; line-height:1.7;
    }
    #address span {
      position:absolute; left:18px; top:22px; font-size:1.6em; color: var(--blue-dark);
    }
    #address a { color: var(--blue-dark); text-decoration:underline;}
    #address iframe {margin-top:12px; border-radius:13px; overflow:hidden; box-shadow:0 1px 8px #1976d211;}
    #floating-chat {
      position:fixed; bottom:30px; right:30px; z-index:1000;
      display:flex; flex-direction:column; gap:10px;
    }
    #floating-chat img {
      width:52px; height:52px; border-radius:50%;
      box-shadow: 0 2px 12px #1976d211;
      background: #fff;
      border: 2px solid var(--blue);
    }
    footer {
      background: var(--blue-dark);
      color: var(--white);
      padding: 32px 6vw 18px 6vw;
      margin-top: 46px;
      text-align: center;
      font-size: 1.13em;
      border-top: 2px solid var(--blue);
      letter-spacing: 1px;
      box-shadow: 0 -2px 12px #1976d211;
    }
    footer .gmail { color: #bbdefb;}
    footer .workhours { color: #bbdefb;}
    @media (max-width:900px){
      #data { grid-template-columns:1fr; }
      .item img {width:94vw; max-width:98vw; height:auto;}
      .item {width:98vw;}
      #policy, #address {padding:18px 4vw;}
      #featured-list { flex-direction: column; gap: 18px;}
      .featured-item { width:96vw; max-width:96vw;}
    }
  </style>
</head>
<body>
  <!-- Banner khuy·∫øn m√£i -->
  <div id="promo-banner">
    üéÅ FREESHIP cho h√≥a ƒë∆°n t·ª´ 500k! &nbsp;|&nbsp; 
    üéâ Gi·∫£m 10% cho kh√°ch mua v√†o ng√†y v√† th√°ng tr√πng nhau (VD: 05/05, 12/12)! &nbsp;|&nbsp; 
    üè∑Ô∏è T·∫∑ng h·ªôp qu√† cho m·ªçi ƒë∆°n h√†ng!
  </div>
  <h1>Gi√° b·∫°c</h1>
  <div id="contact-bar">
    <span><b>Hotline/Zalo:</b> <a href="tel:0972512865">0972512865</a></span> &nbsp;|&nbsp;
    <span><b>Email:</b> <a class="gmail" href="mailto:hsck19956@gmail.com">hsck19956@gmail.com</a></span> &nbsp;|&nbsp;
    <span class="workhours"><b>Gi·ªù l√†m vi·ªác:</b> 7h00 - 19h00 (T2 - CN)</span> &nbsp;|&nbsp;
    <a href="https://zalo.me/0972512865" target="_blank">Chat Zalo</a> &nbsp;|&nbsp;
    <a href="https://m.me/thuhien18102" target="_blank">Chat Messenger</a>
  </div>
  <div id="policy-link">
    <a href="#policy">Ch√≠nh s√°ch</a>
  </div>
  <div id="search-bar">
    <input id="search-input" type="text" placeholder="T√¨m s·∫£n ph·∫©m theo t√™n ho·∫∑c m√£...">
    <button onclick="searchProduct()">T√¨m ki·∫øm</button>
  </div>
  <div id="loader"></div>
  <div id="featured-products" class="scroll-fade">
    <h2>S·∫£n ph·∫©m n·ªïi b·∫≠t</h2>
    <div id="featured-list"></div>
  </div>
  <div id="testimonials" class="scroll-fade">
    <h2>Kh√°ch h√†ng nh·∫≠n x√©t</h2>
    <div id="testimonials-list"></div>
  </div>
  <div id="catalogue" class="scroll-fade"></div>
  <button id="backbtn" style="display:none" onclick="showCatalogue()">‚Üê Quay v·ªÅ danh m·ª•c</button>
  <div id="filter-area" style="display:none"></div>
  <div id="data" style="display:none"></div>
  <div id="pagination" style="display:none"></div>
  <div id="policy" class="scroll-fade">
    <h2>Ch√≠nh s√°ch ƒë·ªïi tr·∫£ & giao h√†ng</h2>
    <ul>
      <li><b>ƒê·ªïi tr·∫£:</b> S·∫£n ph·∫©m ƒë∆∞·ª£c ƒë·ªïi/tr·∫£ trong v√≤ng <b>5 ng√†y</b> n·∫øu c√≤n nguy√™n v·∫πn, ch∆∞a qua s·ª≠ d·ª•ng, kh√¥ng b·ªã tr·∫ßy x∆∞·ªõc, m√≥p m√©o, c√≤n ƒë·∫ßy ƒë·ªß h·ªôp, ph·ª• ki·ªán (n·∫øu c√≥).</li>
      <li><b>Giao h√†ng n·ªôi t·ªânh:</b> Ph√≠ ship 20.000ƒë/ƒë∆°n.</li>
      <li><b>Giao h√†ng ngo√†i t·ªânh:</b> Ph√≠ ship 25.000ƒë/ƒë∆°n.</li>
      <li>Th·ªùi gian giao h√†ng d·ª± ki·∫øn: t·ª´ 1-5 ng√†y tu·ª≥ khu v·ª±c.</li>
      <li>M·ªçi th·∫Øc m·∫Øc ho·∫∑c ƒë·ªïi tr·∫£, li√™n h·ªá <a href="mailto:hsck19956@gmail.com">hsck19956@gmail.com</a> ho·∫∑c Zalo/SƒêT <a href="tel:0972512865">0972512865</a>.</li>
    </ul>
  </div>
  <div id="address" class="scroll-fade">
    <span>üìç</span>
    <b>ƒê·ªãa ch·ªâ:</b>
    <a href="https://www.google.com/maps/place/Doanh+Nghi%E1%BB%87p+T%C6%B0+Nh%C3%A2n+Kim+Ho%C3%A0ng+B%E1%BA%A3y+Chanh/@9.3688065,105.8921107,20.71z/data=!4m6!3m5!1s0x31a1ac4000000001:0xcf6f8131e7d41453!8m2!3d9.3688306!4d105.8920296!16s%2Fg%2F11csrpr1mg?entry=ttu"
    target="_blank">
      Doanh Nghi·ªáp T∆∞ Nh√¢n Kim Ho√†ng B·∫£y Chanh
    </a>
    <div>
      <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3912.646630752199!2d105.8920296!3d9.3688306!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31a1ac4000000001%3A0xcf6f8131e7d41453!2zRG9hbmggTmdoxKlhcCBUxrAgTmjDoW4gS2ltIEhvw6BuZyBC4bqjbSBDaGFuaA!5e0!3m2!1svi!2s!4v1688163869918!5m2!1svi!2s"
        width="100%" height="220" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
    </div>
  </div>
  <!-- Popup order -->
  <div id="order-popup">
    <div class="popup-inner">
      <button class="close" onclick="closeOrderPopup()">√ó</button>
      <h3 style="color:#1976d2;margin-top:0">ƒê·∫∑t h√†ng nhanh</h3>
      <div id="popup-content"></div>
      <a id="popup-mess" href="#" target="_blank" class="ripple-btn">G·ª≠i Messenger</a>
    </div>
  </div>
  <!-- N√∫t chat n·ªïi -->
  <div id="floating-chat">
    <a href="https://zalo.me/0972512865" target="_blank" title="Chat Zalo">
      <img src="https://static-zalo.zadn.vn/oa/zalo-oa-logo.png" alt="Chat Zalo">
    </a>
    <a href="https://m.me/thuhien18102" target="_blank" title="Chat Messenger">
      <img src="https://cdn-icons-png.flaticon.com/512/124/124019.png" alt="Chat Messenger">
    </a>
  </div>
  <footer>
    <div>
      <b>Hotline/Zalo:</b> <a href="tel:0972512865">0972512865</a> &nbsp;|&nbsp;
      <b>Email:</b> <a class="gmail" href="mailto:hsck19956@gmail.com">hsck19956@gmail.com</a> &nbsp;|&nbsp;
      <span class="workhours"><b>Gi·ªù l√†m vi·ªác:</b> 7h00 - 19h00 (T2 - CN)</span>
    </div>
    <div style="margin-top:8px;font-size:0.98em;color:#888;">
      ¬© 2025 Kim Ho√†ng B·∫£y Chanh. All rights reserved.
    </div>
  </footer>
  <script>
    // Hi·ªáu ·ª©ng xu·∫•t hi·ªán khi cu·ªôn
    function scrollFadeIn() {
      document.querySelectorAll('.scroll-fade').forEach(el=>{
        const rect = el.getBoundingClientRect();
        if(rect.top < window.innerHeight-60) el.classList.add('visible');
      });
    }
    window.addEventListener('scroll', scrollFadeIn);
    window.addEventListener('DOMContentLoaded', scrollFadeIn);

    function removeVietnameseTones(str) {
      return str.normalize('NFD')
                .replace(/[\u0300-\u036f]/g, '')
                .replace(/ƒë/g, 'd').replace(/ƒê/g, 'D');
    }

    const categories = [
      { key: "day", label: "D√ÇY", keyword: "day" },
      { key: "nhan", label: "NH·∫™N", keyword: "nhan" },
      { key: "lac", label: "L·∫ÆC", keyword: "lac" },
      { key: "vong", label: "V√íNG", keyword: "vong" },
      { key: "da", label: "ƒê√Å", keyword: "da" },
      { key: "bong", label: "B√îNG", keyword: "bong" }
    ];
    const priceFilters = [
      { key: "all", label: "T·∫•t c·∫£", fn: _ => true },
      { key: "lt500", label: "< 500k", fn: gia => gia > 0 && gia < 500000 },
      { key: "500to1tr", label: "500k - 1tr", fn: gia => gia >= 500000 && gia < 1000000 },
      { key: "1trto2tr", label: "1tr - 2tr", fn: gia => gia >= 1000000 && gia < 2000000 },
      { key: "gt2tr", label: "> 2tr", fn: gia => gia >= 2000000 }
    ];
    const jsonUrl = 'https://raw.githubusercontent.com/hoangsang26061995/bac/main/giabac.json';
    const imgBaseUrl = 'https://raw.githubusercontent.com/hoangsang26061995/anhbac/main/';
    const itemsPerPage = 20;
    let dataAll = [];
    let productsByCat = {};
    let currentCategory = '';
    let currentPage = 1;
    let totalPage = 1;
    let selectedPriceFilter = "all";

    // ƒê√°nh gi√° kh√°ch h√†ng thay ƒë·ªïi m·ªói ng√†y
    const allReviews = [
      {star:5, text:'‚ÄúS·∫£n ph·∫©m ƒë·∫πp, giao h√†ng nhanh, shop t∆∞ v·∫•n nhi·ªát t√¨nh!‚Äù', user:'Lan, C·∫ßn Th∆°'},
      {star:5, text:'‚Äúƒê·ªïi tr·∫£ d·ªÖ d√†ng, m√¨nh r·∫•t h√†i l√≤ng!‚Äù', user:'H√πng, H·∫≠u Giang'},
      {star:5, text:'‚ÄúB·∫°c s√°ng b√≥ng, ƒë√≥ng g√≥i c·∫©n th·∫≠n. S·∫Ω ·ªßng h·ªô ti·∫øp!‚Äù', user:'Thu, S√≥c TrƒÉng'},
      {star:5, text:'‚Äú·∫¢nh th·∫≠t gi·ªëng nh∆∞ shop ƒëƒÉng, gi√° h·ª£p l√Ω.‚Äù', user:'B√¨nh, Vƒ©nh Long'},
      {star:4, text:'‚ÄúPh·ª•c v·ª• t·ªët, l·∫ßn sau s·∫Ω gi·ªõi thi·ªáu b·∫°n b√®.‚Äù', user:'Th·ªßy, C·∫ßn Th∆°'},
      {star:5, text:'‚Äúƒê·∫∑t h√†ng d·ªÖ d√†ng, nh√¢n vi√™n h·ªó tr·ª£ nhi·ªát t√¨nh.‚Äù', user:'V≈©, ƒê·ªìng Th√°p'}
    ];
    function renderTestimonials() {
      const d = new Date();
      const seed = d.getFullYear()*400 + d.getMonth()*31 + d.getDate();
      function seededRandom(s) {
        var x = Math.sin(s) * 10000; return x - Math.floor(x);
      }
      let idx = allReviews.map((r,i)=>i);
      idx.sort((a,b)=>seededRandom(seed+a)-seededRandom(seed+b));
      let html = '';
      for(let i=0;i<2;i++) {
        const rv = allReviews[idx[i]];
        html += `<div class="testimonial">
          <span style="font-size:2em;color:#1976d2;">${'‚òÖ '.repeat(rv.star).trim()}</span><br>
          ${rv.text}<br>
          <i>- ${rv.user}</i>
        </div>`;
      }
      document.getElementById('testimonials-list').innerHTML = html;
    }
        function showLoader(n) {
      const loader = document.getElementById('loader');
      loader.style.display = 'flex';
      let s = '';
      for(let i=0;i<n;i++) s += '<div class="skeleton"></div>';
      loader.innerHTML = s;
    }
    function hideLoader() {
      document.getElementById('loader').style.display = 'none';
    }

    // T√¨m ki·∫øm s·∫£n ph·∫©m (∆∞u ti√™n t√¨m ƒë√∫ng MS n·∫øu nh·∫≠p s·ªë, n·∫øu ch·ªâ c√≥ 1 k·∫øt qu·∫£ s·∫Ω m·ªü popup v·ªõi h√¨nh v√† gi√°)
    function searchProduct() {
      const kw = document.getElementById('search-input').value.trim().toLowerCase();
      if (!kw) {
        showCatalogue();
        return;
      }
      let result = [];
      if (!isNaN(kw)) {
        for (const cat in productsByCat) {
          const found = productsByCat[cat].find(
            item => (item.ms && item.ms.toString().toLowerCase() === kw)
          );
          if (found) {
            result = [found];
            break;
          }
        }
      }
      if (result.length === 0) {
        for (const cat in productsByCat) {
          result = result.concat(productsByCat[cat].filter(
            item =>
              (item.ms && item.ms.toString().toLowerCase().includes(kw)) ||
              (item["t√™n"] && removeVietnameseTones(item["t√™n"].toLowerCase()).includes(removeVietnameseTones(kw)))
          ));
        }
      }
      // N·∫øu t√¨m th·∫•y 1 s·∫£n ph·∫©m, m·ªü popup lu√¥n (v√† truy·ªÅn h√¨nh/gia)
      if (result.length === 1) {
        openOrderPopup(result[0].ms, result[0]["t√™n"], result[0]["giaÃÅ"], imgBaseUrl + result[0].ms + ".jpg");
        document.getElementById('search-input').value = '';
        return;
      }
      document.getElementById('catalogue').style.display = 'none';
      document.getElementById('backbtn').style.display = 'inline-block';
      document.getElementById('filter-area').style.display = 'none';
      document.getElementById('data').style.display = 'grid';
      document.getElementById('pagination').style.display = 'none';
      renderSearchResult(result, kw);
    }
    function renderSearchResult(result, kw) {
      const dataDiv = document.getElementById('data');
      dataDiv.innerHTML = '';
      if(result.length === 0) {
        dataDiv.innerHTML = `<div style="font-size:1.3em;grid-column:span 2;text-align:center;color:#777;margin:24px 0">
          Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m ph√π h·ª£p v·ªõi "<b>${kw}</b>".
        </div>`;
        return;
      }
      result.forEach((item,i) => {
        const div = document.createElement('div');
        div.className = 'item';
        setTimeout(()=>div.classList.add('show'),80+i*45);
        const img = document.createElement('img');
        img.src = imgBaseUrl + item.ms + '.jpg';
        img.alt = item["t√™n"] || '';
        img.title = item["M√î TAÃâ"] || '';
        div.appendChild(img);
        const p = document.createElement('p');
        p.innerHTML =
          `<b>MS:</b> ${item.ms}<br>` +
          `<b>T√™n:</b> ${item["t√™n"]}<br>` +
          `<b>Gi√°:</b> ${item["giaÃÅ"]}`;
        div.appendChild(p);
        const orderBtn = document.createElement('button');
        orderBtn.textContent = 'ƒê·∫∂T H√ÄNG';
        orderBtn.className = 'order-btn ripple-btn';
        orderBtn.onclick = function(e) {
          openOrderPopup(item.ms, item["t√™n"], item["giaÃÅ"], imgBaseUrl + item.ms + ".jpg");
          rippleEffect(e,this);
        };
        div.appendChild(orderBtn);
        dataDiv.appendChild(div);
      });
      rippleBtnInit();
    }

    // S·∫£n ph·∫©m n·ªïi b·∫≠t
    function showFeaturedProducts() {
      const featuredList = document.getElementById('featured-list');
      if (!featuredList) return;
      featuredList.innerHTML = '';
      const featured = dataAll.slice(0,4);
      featured.forEach((item,i) => {
        const div = document.createElement('div');
        div.className = 'featured-item';
        setTimeout(()=>div.style.opacity=1,130+i*120);
        const badge = document.createElement('div');
        badge.className = 'badge-hot';
        badge.textContent = 'N·ªïi b·∫≠t';
        div.appendChild(badge);
        const img = document.createElement('img');
        img.src = imgBaseUrl + item.ms + '.jpg';
        img.alt = item["t√™n"] || '';
        img.title = item["M√î TAÃâ"] || '';
        div.appendChild(img);
        const p = document.createElement('p');
        p.innerHTML = `<b>${item["t√™n"]}</b><br>MS: ${item.ms}<br>Gi√°: ${item["giaÃÅ"]}`;
        div.appendChild(p);
        const orderBtn = document.createElement('button');
        orderBtn.textContent = 'ƒê·∫∂T H√ÄNG';
        orderBtn.className = 'order-btn ripple-btn';
        orderBtn.onclick = function(e) {
          openOrderPopup(item.ms, item["t√™n"], item["giaÃÅ"], imgBaseUrl + item.ms + ".jpg");
          rippleEffect(e,this);
        };
        div.appendChild(orderBtn);
        featuredList.appendChild(div);
      });
      rippleBtnInit();
    }

    function showCatalogue() {
      document.getElementById('catalogue').style.display = 'flex';
      document.getElementById('backbtn').style.display = 'none';
      document.getElementById('filter-area').style.display = 'none';
      document.getElementById('data').style.display = 'none';
      document.getElementById('pagination').style.display = 'none';
      selectedPriceFilter = "all";
    }
    function showCategory(catKey) {
      currentCategory = catKey;
      currentPage = 1;
      selectedPriceFilter = "all";
      document.getElementById('catalogue').style.display = 'none';
      document.getElementById('backbtn').style.display = 'inline-block';
      document.getElementById('filter-area').style.display = 'flex';
      document.getElementById('data').style.display = 'grid';
      document.getElementById('pagination').style.display = 'block';
      renderPriceFilters();
      renderPage(currentPage);
    }
    function renderPriceFilters() {
      const area = document.getElementById('filter-area');
      area.innerHTML = '';
      priceFilters.forEach(flt => {
        const btn = document.createElement('button');
        btn.className = 'filter-btn' + (selectedPriceFilter === flt.key ? ' selected' : '');
        btn.textContent = flt.label;
        btn.onclick = () => {
          selectedPriceFilter = flt.key;
          currentPage = 1;
          renderPriceFilters();
          renderPage(currentPage);
        };
        area.appendChild(btn);
      });
    }
    function parseGia(str) {
      if (!str) return 0;
      let s = (str + '').replace(/[^0-9]/g, '');
      return parseInt(s, 10) || 0;
    }
    function renderPage(page) {
      showLoader(2);
      setTimeout(()=>{
      let products = productsByCat[currentCategory] || [];
      const pf = priceFilters.find(f => f.key === selectedPriceFilter) || priceFilters[0];
      products = products.filter(item => pf.fn(parseGia(item["giaÃÅ"])));
      totalPage = Math.ceil(products.length / itemsPerPage) || 1;
      const start = (page - 1) * itemsPerPage;
      const end = start + itemsPerPage;
      const data = products.slice(start, end);
      const dataDiv = document.getElementById('data');
      dataDiv.innerHTML = '';
      if(data.length === 0) {
        dataDiv.innerHTML = '<div style="font-size:1.5em;grid-column:span 2;text-align:center;color:#777;margin:30px 0">Kh√¥ng c√≥ s·∫£n ph·∫©m n√†o ph√π h·ª£p.</div>';
      }
      data.forEach((item,i) => {
        const div = document.createElement('div');
        div.className = 'item';
        setTimeout(()=>div.classList.add('show'),80+i*45);
        const img = document.createElement('img');
        img.src = imgBaseUrl + item.ms + '.jpg';
        img.alt = item["t√™n"] || '';
        img.title = item["M√î TAÃâ"] || '';
        div.appendChild(img);
        const p = document.createElement('p');
        p.innerHTML =
          `<b>MS:</b> ${item.ms}<br>` +
          `<b>T√™n:</b> ${item["t√™n"]}<br>` +
          `<b>Gi√°:</b> ${item["giaÃÅ"]}`;
        div.appendChild(p);
        const orderBtn = document.createElement('button');
        orderBtn.textContent = 'ƒê·∫∂T H√ÄNG';
        orderBtn.className = 'order-btn ripple-btn';
        orderBtn.onclick = function(e) {
          openOrderPopup(item.ms, item["t√™n"], item["giaÃÅ"], imgBaseUrl + item.ms + ".jpg");
          rippleEffect(e,this);
        };
        div.appendChild(orderBtn);
        dataDiv.appendChild(div);
      });
      hideLoader();
      rippleBtnInit();
      },350)
      const paginationDiv = document.getElementById('pagination');
      paginationDiv.innerHTML = '';
      const prevBtn = document.createElement('button');
      prevBtn.textContent = "Trang tr∆∞·ªõc";
      prevBtn.disabled = page <= 1;
      prevBtn.onclick = () => {
        if (currentPage > 1) {
          currentPage--;
          renderPage(currentPage);
        }
      };
      paginationDiv.appendChild(prevBtn);
      const pageSpan = document.createElement('span');
      pageSpan.textContent = `Trang ${page} / ${totalPage}`;
      paginationDiv.appendChild(pageSpan);
      const nextBtn = document.createElement('button');
      nextBtn.textContent = "Trang sau";
      nextBtn.disabled = page >= totalPage;
      nextBtn.onclick = () => {
        if (currentPage < totalPage) {
          currentPage++;
          renderPage(currentPage);
        }
      };
      paginationDiv.appendChild(nextBtn);
    }
    function renderCatalogue() {
      const catDiv = document.getElementById('catalogue');
      catDiv.innerHTML = '';
      categories.forEach(cat => {
        const el = document.createElement('div');
        el.className = 'catalogue-item';
        el.textContent = cat.label;
        el.onclick = () => {
          if ((productsByCat[cat.key] || []).length > 0) {
            showCategory(cat.key);
          } else {
            alert('Hi·ªán ch∆∞a c√≥ s·∫£n ph·∫©m cho danh m·ª•c n√†y!');
          }
        };
        catDiv.appendChild(el);
      });
    }
    function classifyProducts() {
      productsByCat = {};
      categories.forEach(cat => productsByCat[cat.key] = []);
      dataAll.forEach(item => {
        const ten = removeVietnameseTones((item["t√™n"] || "").toLowerCase());
        for (let cat of categories) {
          if (ten.includes(cat.keyword)) {
            productsByCat[cat.key].push(item);
            break;
          }
        }
      });
    }
    // Ripple effect cho n√∫t
    function rippleEffect(e, btn) {
      const rect = btn.getBoundingClientRect();
      const circle = document.createElement('span');
      circle.className = 'ripple-anim';
      circle.style.width = circle.style.height = Math.max(rect.width, rect.height) + 'px';
      circle.style.left = (e.clientX - rect.left - rect.width/2) + 'px';
      circle.style.top = (e.clientY - rect.top - rect.height/2) + 'px';
      btn.appendChild(circle);
      setTimeout(()=>circle.remove(),600);
    }
    // Kh·ªüi t·∫°o ripple cho t·∫•t c·∫£ n√∫t m·ªõi render
    function rippleBtnInit() {
      document.querySelectorAll('.ripple-btn').forEach(btn=>{
        if(!btn.dataset.ripple){
          btn.addEventListener('click',function(e){rippleEffect(e,this)});
          btn.dataset.ripple = "1";
        }
      });
    }
    // Popup ƒë·∫∑t h√†ng (hi·ªán c·∫£ h√¨nh v√† gi√°) + hi·ªáu ·ª©ng m∆∞·ª£t
    function openOrderPopup(ms, ten, gia, imgUrl) {
      if (!gia || !imgUrl) {
        let sp = null;
        for (const cat in productsByCat) {
          sp = productsByCat[cat].find(item => (item.ms && item.ms.toString() === ms.toString()));
          if (sp) break;
        }
        if (sp) {
          gia = sp["giaÃÅ"];
          ten = sp["t√™n"];
          imgUrl = imgBaseUrl + sp.ms + ".jpg";
        }
      }
      const popup = document.getElementById('order-popup');
      popup.style.display = 'flex';
      setTimeout(()=>popup.classList.add('show'),5);
      document.getElementById('popup-content').innerHTML =
        `<div style="margin-bottom:10px;">
          <img src="${imgUrl}" alt="${ten || ''}" style="max-width:220px;max-height:220px;border-radius:11px;box-shadow:0 2px 8px #0003;background:#fff;"><br>
          <div style="font-size:1.15em;margin-top:10px;">
            <b>M√£ s·∫£n ph·∫©m:</b> ${ms}<br>
            <b>T√™n:</b> ${ten}<br>
            <b>Gi√°:</b> ${gia || ''}<br>
          </div>
        </div>
        <button onclick="navigator.clipboard.writeText('M√£: ${ms}, T√™n: ${ten}');this.innerText='ƒê√£ copy!';setTimeout(()=>this.innerText='Copy m√£',1500)" style="padding:7px 18px;border-radius:6px;background:#1976d2;color:#fff;font-weight:bold;border:none;cursor:pointer;">Copy m√£</button>`;
      const messText = encodeURIComponent(`Shop ∆°i m√¨nh mu·ªën ƒë·∫∑t s·∫£n ph·∫©m "${ms}"`);
      document.getElementById('popup-mess').href =
        `https://m.me/thuhien18102?text=${messText}`;
    }
    function closeOrderPopup() {
      const popup = document.getElementById('order-popup');
      popup.classList.remove('show');
      setTimeout(() => { popup.style.display = 'none'; }, 260);
    }
    // Cho ph√©p nh·∫•n Enter ƒë·ªÉ t√¨m ki·∫øm
    document.addEventListener('DOMContentLoaded', function() {
      document.getElementById('search-input').addEventListener('keydown', function(e){
        if(e.key==='Enter'){ searchProduct(); }
      });
    });
    // T·∫£i d·ªØ li·ªáu c√≥ skeleton loader
    showLoader(2);
    fetch(jsonUrl)
      .then(response => {
        if (!response.ok) throw new Error('Kh√¥ng l·∫•y ƒë∆∞·ª£c file JSON');
        return response.json();
      })
      .then(data => {
        hideLoader();
        dataAll = data;
        classifyProducts();
        renderCatalogue();
        showCatalogue();
        showFeaturedProducts();
        renderTestimonials();
        rippleBtnInit();
      })
      .catch(error => {
        hideLoader();
        document.getElementById('catalogue').innerText = 'L·ªói: ' + error.message;
      });
  </script>
</body>
</html>
