<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <title>Gi√° b·∫°c - Kim Ho√†ng B·∫£y Chanh</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Chuy√™n c√°c s·∫£n ph·∫©m b·∫°c uy t√≠n, ch·∫•t l∆∞·ª£ng, giao h√†ng nhanh to√†n qu·ªëc. ƒê·ªïi tr·∫£ d·ªÖ d√†ng, t∆∞ v·∫•n t·∫≠n t√¢m.">
  <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/3176/3176367.png">
  <style>
    body {background:#fff;font-family:Arial,sans-serif;margin:0;padding:0;}
    h1 {text-align:center;font-size:2.3em;margin-bottom:10px;margin-top:20px;color:#333;letter-spacing:2px;}
    #contact-bar {text-align:center;margin-bottom:10px;font-size:1.18em;background:#f9f9f9;padding:10px 0;border-bottom:1px solid #eee;}
    #contact-bar a {color:#007aff;font-weight:bold;text-decoration:none;margin:0 8px;}
    #contact-bar a:hover {text-decoration:underline;}
    #policy-link {text-align:center;margin-bottom:20px;}
    #policy-link a {color:#007aff;font-weight:bold;font-size:1.1em;text-decoration:none;}
    #policy-link a:hover {text-decoration:underline;}
    #search-bar {text-align:center;margin:24px 0 10px 0;}
    #search-bar input[type="text"] {width:300px;padding:10px;border-radius:6px;border:1px solid #ccc;font-size:1em;max-width:90vw;}
    #search-bar button {padding:10px 20px;border-radius:6px;background:#007aff;color:#fff;font-weight:bold;border:none;cursor:pointer;margin-left:8px;}
    #featured-products {max-width:900px;margin:30px auto 18px;}
    #featured-products h2 {color:#ff9800;text-align:center;margin-bottom:18px;}
    #featured-list {display:flex;flex-wrap:wrap;gap:22px;justify-content:center;}
    .featured-item {background:#f2f2f2;border-radius:16px;box-shadow:0 2px 8px #0001;padding:18px 10px 18px 10px;text-align:center;width:220px;max-width:92vw;display:flex;flex-direction:column;align-items:center;}
    .featured-item img {width:200px;height:200px;object-fit:cover;border-radius:10px;background:#fff;box-shadow:0 1px 6px #0002;margin-bottom:10px;}
    .featured-item .order-btn {padding:8px 18px;font-size:1em;}
    .badge-hot {display:inline-block;background:#ff9800;color:#fff;font-size:0.95em;font-weight:bold;padding:3px 12px;border-radius:9px;margin-bottom:7px;}
    #testimonials {max-width:700px;margin:32px auto 18px;}
    #testimonials h2 {color:#009688;text-align:center;margin-bottom:18px;}
    #testimonials-list {display:flex;flex-wrap:wrap;gap:18px;justify-content:center;}
    .testimonial {background:#fff;border-radius:10px;box-shadow:0 2px 8px #0001;padding:18px 16px;width:260px;font-size:1.07em;line-height:1.6;}
    #catalogue {display:flex;flex-wrap:wrap;justify-content:center;gap:32px;margin:40px 0 10px 0;padding:0 8px;}
    .catalogue-item {background:#f2f2f2;border-radius:18px;padding:36px 44px;font-size:2em;font-weight:bold;color:#007aff;cursor:pointer;box-shadow:0 2px 8px #0001;transition:transform 0.18s,box-shadow 0.18s,background 0.18s;text-align:center;border:2px solid #fff;min-width:120px;}
    .catalogue-item:hover {background:#007aff;color:#fff;transform:translateY(-6px) scale(1.04);border:2px solid #007aff;box-shadow:0 4px 24px #007aff44;}
    #filter-area {display:flex;justify-content:center;align-items:center;gap:12px;margin:20px 0 10px 0;flex-wrap:wrap;}
    .filter-btn {background:#eee;border:none;color:#007aff;font-weight:bold;font-size:1em;border-radius:6px;padding:10px 22px;cursor:pointer;transition:background 0.18s,color 0.18s;border:2px solid #eee;margin-bottom:6px;}
    .filter-btn.selected,.filter-btn:hover {background:#007aff;color:#fff;border:2px solid #007aff;}
    #data {display:grid;grid-template-columns:repeat(2,1fr);gap:30px 30px;justify-items:center;align-items:start;margin-bottom:12px;padding:0 8px;}
    .item {display:flex;flex-direction:column;align-items:center;background:#f2f2f2;padding:24px 18px;border-radius:18px;box-shadow:0 2px 8px #0001;width:420px;max-width:98vw;position:relative;}
    .item img {width:400px;height:400px;margin-bottom:20px;object-fit:cover;cursor:pointer;border-radius:12px;box-shadow:0 2px 8px #0003;border:2px solid #ddd;max-width:96vw;height:auto;aspect-ratio:1/1;background:#fff;}
    .item p {margin:0;font-size:2em;line-height:1.5;text-align:center;word-break:break-word;}
    .order-btn {margin-top:16px;background:#007aff;color:#fff;font-weight:bold;padding:12px 32px;border-radius:8px;text-decoration:none;font-size:1.1em;box-shadow:0 2px 8px #007aff44;display:inline-block;border:none;transition:background 0.2s,color 0.2s;cursor:pointer;}
    .order-btn:hover {background:#0051a8;color:#fff;}
    .share-links {margin-top:8px;}
    .share-links a {margin-right:18px;text-decoration:none;font-weight:bold;font-size:1.1em;}
    .share-links .fb {color:#4267B2;}
    .share-links .zalo {color:#1dcaff;}
    #pagination {text-align:center;margin:30px 0 10px 0;}
    #pagination button {padding:10px 18px;font-size:1.1em;margin:0 10px;border:none;background:#007aff;color:#fff;border-radius:8px;cursor:pointer;box-shadow:0 2px 8px #0002;transition:background 0.2s;}
    #pagination button:disabled {background:#aaa;cursor:not-allowed;box-shadow:none;}
    #pagination span {font-size:1.2em;margin:0 8px;font-weight:bold;}
    #backbtn {display:inline-block;margin:22px 0 7px 25px;padding:12px 26px;font-size:1.1em;background:#eee;color:#007aff;border:2px solid #007aff;border-radius:8px;cursor:pointer;font-weight:bold;transition:background 0.18s,color 0.18s;}
    #backbtn:hover {background:#007aff;color:#fff;}
    #policy {max-width:600px;margin:40px auto 20px;background:#f6f8fa;padding:32px 22px;border-radius:14px;box-shadow:0 2px 8px #0001;}
    #policy h2 {color:#007aff;margin-top:0;}
    #policy ul {font-size:1.1em;line-height:1.7;padding-left:18px;}
    #order-popup {display:none;position:fixed;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.32);z-index:99;align-items:center;justify-content:center;}
    #order-popup .popup-inner {background:#fff;min-width:320px;max-width:96vw;padding:30px 20px;border-radius:12px;box-shadow:0 2px 16px #0003;text-align:center;position:relative;}
    #order-popup .popup-inner button.close {position:absolute;top:8px;right:12px;background:none;border:none;font-size:2em;color:#aaa;cursor:pointer;}
    #address {max-width:600px;margin:32px auto 32px;background:#f6f8fa;padding:18px 18px 18px 60px;border-radius:14px;box-shadow:0 2px 8px #0001;position:relative;font-size:1.13em;line-height:1.7;}
    #address span {position:absolute;left:18px;top:22px;font-size:1.5em;color:#007aff;}
    #address a {color:#007aff;text-decoration:underline;}
    #address iframe {margin-top:12px;border-radius:13px;overflow:hidden;box-shadow:0 1px 8px #0002;}
    #floating-chat {position:fixed;bottom:30px;right:30px;z-index:1000;display:flex;flex-direction:column;gap:12px;}
    #floating-chat img {width:50px;height:50px;border-radius:50%;box-shadow:0 2px 8px #0004;background:#fff;}
    @media (max-width:1000px){
      #data {grid-template-columns:1fr;}
      .item img {width:92vw;max-width:96vw;height:auto;}
      .item {width:96vw;}
      #policy,#address {padding:18px 3vw;}
      #featured-list {flex-direction:column;gap:18px;}
      .featured-item {width:96vw;max-width:96vw;}
    }
  </style>
</head>
<body>
  <h1>Gi√° b·∫°c</h1>
  <div id="contact-bar">
    <span><b>Li√™n h·ªá/Zalo:</b> <a href="tel:0972512865">0972512865</a></span> &nbsp;|&nbsp;
    <a href="https://zalo.me/0972512865" target="_blank">Chat Zalo</a> &nbsp;|&nbsp;
    <a href="https://m.me/thuhien18102" target="_blank">Chat Messenger</a>
  </div>
  <div id="policy-link">
    <a href="#policy">Ch√≠nh s√°ch</a>
  </div>
  <div id="search-bar">
    <input id="search-input" type="text" placeholder="T√¨m s·∫£n ph·∫©m theo t√™n ho·∫∑c m√£...">
    <button onclick="searchProduct()">T√¨m ki·∫øm</button>
  </div>
  <div id="featured-products">
    <h2>S·∫£n ph·∫©m n·ªïi b·∫≠t</h2>
    <div id="featured-list"></div>
  </div>
  <div id="testimonials">
    <h2>Kh√°ch h√†ng nh·∫≠n x√©t</h2>
    <div id="testimonials-list"></div>
  </div>
  <div id="catalogue"></div>
  <button id="backbtn" style="display:none" onclick="showCatalogue()">‚Üê Quay v·ªÅ danh m·ª•c</button>
  <div id="filter-area" style="display:none"></div>
  <div id="data" style="display:none"></div>
  <div id="pagination" style="display:none"></div>
  <div id="policy">
    <h2>Ch√≠nh s√°ch ƒë·ªïi tr·∫£ & giao h√†ng</h2>
    <ul>
      <li><b>ƒê·ªïi tr·∫£:</b> S·∫£n ph·∫©m ƒë∆∞·ª£c ƒë·ªïi/tr·∫£ trong v√≤ng <b>5 ng√†y</b> n·∫øu c√≤n nguy√™n v·∫πn, ch∆∞a qua s·ª≠ d·ª•ng, kh√¥ng b·ªã tr·∫ßy x∆∞·ªõc, m√≥p m√©o, c√≤n ƒë·∫ßy ƒë·ªß h·ªôp, ph·ª• ki·ªán (n·∫øu c√≥).</li>
      <li><b>Giao h√†ng n·ªôi t·ªânh:</b> Ph√≠ ship 20.000ƒë/ƒë∆°n.</li>
      <li><b>Giao h√†ng ngo√†i t·ªânh:</b> Ph√≠ ship 25.000ƒë/ƒë∆°n.</li>
      <li>Th·ªùi gian giao h√†ng d·ª± ki·∫øn: t·ª´ 1-5 ng√†y tu·ª≥ khu v·ª±c.</li>
      <li>Qu√Ω kh√°ch vui l√≤ng li√™n h·ªá tr∆∞·ªõc khi ƒë·ªïi tr·∫£ s·∫£n ph·∫©m.</li>
    </ul>
  </div>
  <div id="address">
    <span>üìç</span>
    <b>ƒê·ªãa ch·ªâ:</b>
    <a href="https://www.google.com/maps/place/Doanh+Nghi%E1%BB%87p+T%C6%B0+Nh%C3%A2n+Kim+Ho%C3%A0ng+B%E1%BA%A3y+Chanh/@9.3688065,105.8921107,20.71z/data=!4m6!3m5!1s0x31a1ac4000000001:0xcf6f8131e7d41453!8m2!3d9.3688306!4d105.8920296!16s%2Fg%2F11csrpr1mg?entry=ttu&g_ep=EgoyMDI1MDUyNi4wIKXMDSoASAFQAw%3D%3D"
    target="_blank">
      Doanh Nghi·ªáp T∆∞ Nh√¢n Kim Ho√†ng B·∫£y Chanh
    </a>
    <div>
      <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3912.646630752199!2d105.8920296!3d9.3688306!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31a1ac4000000001%3A0xcf6f8131e7d41453!2zRG9hbmggTmdoxKlhcCBUxrAgTmjDoW4gS2ltIEhvw6BuZyBC4bqjbSBDaGFuaA!5e0!3m2!1svi!2s!4v1688163869918!5m2!1svi!2s"
        width="100%" height="220" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
    </div>
  </div>
  <!-- Popup order -->
  <div id="order-popup">
    <div class="popup-inner">
      <button class="close" onclick="closeOrderPopup()">√ó</button>
      <h3 style="color:#007aff;margin-top:0">ƒê·∫∑t h√†ng nhanh</h3>
      <div id="popup-content"></div>
      <a id="popup-mess" href="#" target="_blank" style="display:inline-block;margin-top:18px;background:#007aff;color:#fff;font-weight:bold;padding:10px 32px;border-radius:8px;text-decoration:none;box-shadow:0 2px 8px #007aff44;font-size:1.1em;">G·ª≠i Messenger</a>
      <div class="share-links" style="margin-top:18px;">
        <a class="fb" href="https://www.facebook.com/sharer/sharer.php?u=https://hoangsang26061995.github.io/bac/" target="_blank">Chia s·∫ª Facebook</a>
        <a class="zalo" href="https://zalo.me/share/url?url=https://hoangsang26061995.github.io/bac/" target="_blank">Chia s·∫ª Zalo</a>
      </div>
    </div>
  </div>
  <!-- N√∫t chat n·ªïi -->
  <div id="floating-chat">
    <a href="https://zalo.me/0972512865" target="_blank" title="Chat Zalo">
      <img src="https://static-zalo.zadn.vn/oa/zalo-oa-logo.png" alt="Chat Zalo">
    </a>
    <a href="https://m.me/thuhien18102" target="_blank" title="Chat Messenger">
      <img src="https://cdn-icons-png.flaticon.com/512/124/124019.png" alt="Chat Messenger">
    </a>
  </div>
  <script>
    // H√†m b·ªè d·∫•u ti·∫øng Vi·ªát
    function removeVietnameseTones(str) {
      return str.normalize('NFD')
                .replace(/[\u0300-\u036f]/g, '')
                .replace(/ƒë/g, 'd').replace(/ƒê/g, 'D');
    }

    // Danh m·ª•c v√† t·ª´ kh√≥a ph√¢n lo·∫°i
    const categories = [
      { key: "day", label: "D√ÇY", keyword: "day" },
      { key: "nhan", label: "NH·∫™N", keyword: "nhan" },
      { key: "lac", label: "L·∫ÆC", keyword: "lac" },
      { key: "vong", label: "V√íNG", keyword: "vong" },
      { key: "da", label: "ƒê√Å", keyword: "da" },
      { key: "bong", label: "B√îNG", keyword: "bong" }
    ];

    // C√°c m·ª©c l·ªçc gi√°
    const priceFilters = [
      { key: "all", label: "T·∫•t c·∫£", fn: _ => true },
      { key: "lt500", label: "< 500k", fn: gia => gia > 0 && gia < 500000 },
      { key: "500to1tr", label: "500k - 1tr", fn: gia => gia >= 500000 && gia < 1000000 },
      { key: "1trto2tr", label: "1tr - 2tr", fn: gia => gia >= 1000000 && gia < 2000000 },
      { key: "gt2tr", label: "> 2tr", fn: gia => gia >= 2000000 }
    ];

    const jsonUrl = 'https://raw.githubusercontent.com/hoangsang26061995/bac/main/giabac.json';
    const imgBaseUrl = 'https://raw.githubusercontent.com/hoangsang26061995/anhbac/main/';
    const itemsPerPage = 20;
    const messengerLink = 'https://m.me/thuhien18102';
    let dataAll = [];
    let productsByCat = {};
    let currentCategory = '';
    let currentPage = 1;
    let totalPage = 1;
    let selectedPriceFilter = "all";

    // ƒê√°nh gi√° kh√°ch h√†ng thay ƒë·ªïi m·ªói ng√†y
    const allReviews = [
      {star:5, text:'‚ÄúS·∫£n ph·∫©m ƒë·∫πp, giao h√†ng nhanh, shop t∆∞ v·∫•n nhi·ªát t√¨nh!‚Äù', user:'Lan, C·∫ßn Th∆°'},
      {star:5, text:'‚Äúƒê·ªïi tr·∫£ d·ªÖ d√†ng, m√¨nh r·∫•t h√†i l√≤ng!‚Äù', user:'H√πng, H·∫≠u Giang'},
      {star:5, text:'‚ÄúB·∫°c s√°ng b√≥ng, ƒë√≥ng g√≥i c·∫©n th·∫≠n. S·∫Ω ·ªßng h·ªô ti·∫øp!‚Äù', user:'Thu, S√≥c TrƒÉng'},
      {star:5, text:'‚Äú·∫¢nh th·∫≠t gi·ªëng nh∆∞ shop ƒëƒÉng, gi√° h·ª£p l√Ω.‚Äù', user:'B√¨nh, Vƒ©nh Long'},
      {star:4, text:'‚ÄúPh·ª•c v·ª• t·ªët, l·∫ßn sau s·∫Ω gi·ªõi thi·ªáu b·∫°n b√®.‚Äù', user:'Th·ªßy, C·∫ßn Th∆°'},
      {star:5, text:'‚Äúƒê·∫∑t h√†ng d·ªÖ d√†ng, nh√¢n vi√™n h·ªó tr·ª£ nhi·ªát t√¨nh.‚Äù', user:'V≈©, ƒê·ªìng Th√°p'}
    ];
    function renderTestimonials() {
      const d = new Date();
      // "Random" ·ªïn ƒë·ªãnh theo ng√†y: d√πng s·ªë ng√†y trong nƒÉm l√†m seed
      const seed = d.getFullYear()*400 + d.getMonth()*31 + d.getDate();
      function seededRandom(s) {
        var x = Math.sin(s) * 10000; return x - Math.floor(x);
      }
      // X√°o tr·ªôn th·ª© t·ª± reviews theo seed
      let idx = allReviews.map((r,i)=>i);
      idx.sort((a,b)=>seededRandom(seed+a)-seededRandom(seed+b));
      // Ch·ªçn 2 ƒë√°nh gi√° ƒë·∫ßu
      let html = '';
      for(let i=0;i<2;i++) {
        const rv = allReviews[idx[i]];
        html += `<div class="testimonial">
          <span style="font-size:2em;color:#ff9800;">${'‚òÖ '.repeat(rv.star).trim()}</span><br>
          ${rv.text}<br>
          <i>- ${rv.user}</i>
        </div>`;
      }
      document.getElementById('testimonials-list').innerHTML = html;
    }

    // T√¨m ki·∫øm s·∫£n ph·∫©m
    function searchProduct() {
      const kw = document.getElementById('search-input').value.trim().toLowerCase();
      if (!kw) {
        showCatalogue();
        return;
      }
      let result = [];
      for (const cat in productsByCat) {
        result = result.concat(productsByCat[cat].filter(
          item => (item["t√™n"] && removeVietnameseTones(item["t√™n"].toLowerCase()).includes(removeVietnameseTones(kw))) ||
                  (item.ms && item.ms.toLowerCase().includes(kw))
        ));
      }
      document.getElementById('catalogue').style.display = 'none';
      document.getElementById('backbtn').style.display = 'inline-block';
      document.getElementById('filter-area').style.display = 'none';
      document.getElementById('data').style.display = 'grid';
      document.getElementById('pagination').style.display = 'none';
      renderSearchResult(result, kw);
    }
    function renderSearchResult(result, kw) {
      const dataDiv = document.getElementById('data');
      dataDiv.innerHTML = '';
      if(result.length === 0) {
        dataDiv.innerHTML = `<div style="font-size:1.3em;grid-column:span 2;text-align:center;color:#777;margin:24px 0">
          Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m ph√π h·ª£p v·ªõi "<b>${kw}</b>".
        </div>`;
        return;
      }
      result.forEach(item => {
        const div = document.createElement('div');
        div.className = 'item';
        const img = document.createElement('img');
        img.src = imgBaseUrl + item.ms + '.jpg';
        img.alt = item["t√™n"] || '';
        img.title = item["M√î TAÃâ"] || '';
        div.appendChild(img);
        const p = document.createElement('p');
        p.innerHTML =
          `<b>MS:</b> ${item.ms}<br>` +
          `<b>T√™n:</b> ${item["t√™n"]}<br>` +
          `<b>Gi√°:</b> ${item["giaÃÅ"]}`;
        div.appendChild(p);
        const orderBtn = document.createElement('button');
        orderBtn.textContent = 'ƒê·∫∂T H√ÄNG';
        orderBtn.className = 'order-btn';
        orderBtn.onclick = () => openOrderPopup(item.ms, item["t√™n"]);
        div.appendChild(orderBtn);
        div.appendChild(makeShareLinks());
        dataDiv.appendChild(div);
      });
    }

    // S·∫£n ph·∫©m n·ªïi b·∫≠t
    function showFeaturedProducts() {
      const featuredList = document.getElementById('featured-list');
      if (!featuredList) return;
      featuredList.innerHTML = '';
      const featured = dataAll.slice(0,4); // ch·ªçn 4 s·∫£n ph·∫©m ƒë·∫ßu l√†m n·ªïi b·∫≠t
      featured.forEach(item => {
        const div = document.createElement('div');
        div.className = 'featured-item';
        const badge = document.createElement('div');
        badge.className = 'badge-hot';
        badge.textContent = 'N·ªïi b·∫≠t';
        div.appendChild(badge);
        const img = document.createElement('img');
        img.src = imgBaseUrl + item.ms + '.jpg';
        img.alt = item["t√™n"] || '';
        img.title = item["M√î TAÃâ"] || '';
        div.appendChild(img);
        const p = document.createElement('p');
        p.innerHTML = `<b>${item["t√™n"]}</b><br>MS: ${item.ms}<br>Gi√°: ${item["giaÃÅ"]}`;
        div.appendChild(p);
        const orderBtn = document.createElement('button');
        orderBtn.textContent = 'ƒê·∫∂T H√ÄNG';
        orderBtn.className = 'order-btn';
        orderBtn.onclick = () => openOrderPopup(item.ms, item["t√™n"]);
        div.appendChild(orderBtn);
        div.appendChild(makeShareLinks());
        featuredList.appendChild(div);
      });
    }
    // Share links
    function makeShareLinks() {
      const c = document.createElement('div');
      c.className = "share-links";
      c.innerHTML = `<a class="fb" href="https://www.facebook.com/sharer/sharer.php?u=https://hoangsang26061995.github.io/bac/" target="_blank">Chia s·∫ª Facebook</a>
      <a class="zalo" href="https://zalo.me/share/url?url=https://hoangsang26061995.github.io/bac/" target="_blank">Chia s·∫ª Zalo</a>`;
      return c;
    }

    function showCatalogue() {
      document.getElementById('catalogue').style.display = 'flex';
      document.getElementById('backbtn').style.display = 'none';
      document.getElementById('filter-area').style.display = 'none';
      document.getElementById('data').style.display = 'none';
      document.getElementById('pagination').style.display = 'none';
      selectedPriceFilter = "all";
    }

    function showCategory(catKey) {
      currentCategory = catKey;
      currentPage = 1;
      selectedPriceFilter = "all";
      document.getElementById('catalogue').style.display = 'none';
      document.getElementById('backbtn').style.display = 'inline-block';
      document.getElementById('filter-area').style.display = 'flex';
      document.getElementById('data').style.display = 'grid';
      document.getElementById('pagination').style.display = 'block';
      renderPriceFilters();
      renderPage(currentPage);
    }

    function renderPriceFilters() {
      const area = document.getElementById('filter-area');
      area.innerHTML = '';
      priceFilters.forEach(flt => {
        const btn = document.createElement('button');
        btn.className = 'filter-btn' + (selectedPriceFilter === flt.key ? ' selected' : '');
        btn.textContent = flt.label;
        btn.onclick = () => {
          selectedPriceFilter = flt.key;
          currentPage = 1;
          renderPriceFilters();
          renderPage(currentPage);
        };
        area.appendChild(btn);
      });
    }

    function parseGia(str) {
      if (!str) return 0;
      let s = (str + '').replace(/[^0-9]/g, ''); // lo·∫°i b·ªè k√Ω t·ª± kh√¥ng ph·∫£i s·ªë
      return parseInt(s, 10) || 0;
    }

    function renderPage(page) {
      let products = productsByCat[currentCategory] || [];
      // L·ªçc theo gi√°
      const pf = priceFilters.find(f => f.key === selectedPriceFilter) || priceFilters[0];
      products = products.filter(item => pf.fn(parseGia(item["giaÃÅ"])));

      totalPage = Math.ceil(products.length / itemsPerPage) || 1;
      const start = (page - 1) * itemsPerPage;
      const end = start + itemsPerPage;
      const data = products.slice(start, end);

      const dataDiv = document.getElementById('data');
      dataDiv.innerHTML = '';
      if(data.length === 0) {
        dataDiv.innerHTML = '<div style="font-size:1.5em;grid-column:span 2;text-align:center;color:#777;margin:30px 0">Kh√¥ng c√≥ s·∫£n ph·∫©m n√†o ph√π h·ª£p.</div>';
      }
      data.forEach(item => {
        const div = document.createElement('div');
        div.className = 'item';

        const img = document.createElement('img');
        img.src = imgBaseUrl + item.ms + '.jpg';
        img.alt = item["t√™n"] || '';
        img.title = item["M√î TAÃâ"] || '';
        div.appendChild(img);

        const p = document.createElement('p');
        p.innerHTML =
          `<b>MS:</b> ${item.ms}<br>` +
          `<b>T√™n:</b> ${item["t√™n"]}<br>` +
          `<b>Gi√°:</b> ${item["giaÃÅ"]}`;
        div.appendChild(p);

        // N√∫t ƒë·∫∑t h√†ng m·ªü popup
        const orderBtn = document.createElement('button');
        orderBtn.textContent = 'ƒê·∫∂T H√ÄNG';
        orderBtn.className = 'order-btn';
        orderBtn.onclick = () => openOrderPopup(item.ms, item["t√™n"]);
        div.appendChild(orderBtn);

        div.appendChild(makeShareLinks());
        dataDiv.appendChild(div);
      });

      // Pagination
      const paginationDiv = document.getElementById('pagination');
      paginationDiv.innerHTML = '';
      const prevBtn = document.createElement('button');
      prevBtn.textContent = "Trang tr∆∞·ªõc";
      prevBtn.disabled = page <= 1;
      prevBtn.onclick = () => {
        if (currentPage > 1) {
          currentPage--;
          renderPage(currentPage);
        }
      };
      paginationDiv.appendChild(prevBtn);

      const pageSpan = document.createElement('span');
      pageSpan.textContent = `Trang ${page} / ${totalPage}`;
      paginationDiv.appendChild(pageSpan);

      const nextBtn = document.createElement('button');
      nextBtn.textContent = "Trang sau";
      nextBtn.disabled = page >= totalPage;
      nextBtn.onclick = () => {
        if (currentPage < totalPage) {
          currentPage++;
          renderPage(currentPage);
        }
      };
      paginationDiv.appendChild(nextBtn);
    }

    function renderCatalogue() {
      const catDiv = document.getElementById('catalogue');
      catDiv.innerHTML = '';
      categories.forEach(cat => {
        const el = document.createElement('div');
        el.className = 'catalogue-item';
        el.textContent = cat.label;
        el.onclick = () => {
          if ((productsByCat[cat.key] || []).length > 0) {
            showCategory(cat.key);
          } else {
            alert('Hi·ªán ch∆∞a c√≥ s·∫£n ph·∫©m cho danh m·ª•c n√†y!');
          }
        };
        catDiv.appendChild(el);
      });
    }

    // PH√ÇN LO·∫†I S·∫¢N PH·∫®M (B·ªé D·∫§U KHI SO S√ÅNH)
    function classifyProducts() {
      productsByCat = {};
      categories.forEach(cat => productsByCat[cat.key] = []);
      dataAll.forEach(item => {
        const ten = removeVietnameseTones((item["t√™n"] || "").toLowerCase());
        for (let cat of categories) {
          if (ten.includes(cat.keyword)) {
            productsByCat[cat.key].push(item);
            break;
          }
        }
      });
    }

    // Popup ƒë·∫∑t h√†ng
    function openOrderPopup(ms, ten) {
      document.getElementById('order-popup').style.display = 'flex';
      document.getElementById('popup-content').innerHTML =
        `<div style="font-size:1.1em;margin-bottom:8px;">M√£ s·∫£n ph·∫©m: <b>${ms}</b><br>T√™n: <b>${ten}</b></div>
        <button onclick="navigator.clipboard.writeText('M√£: ${ms}, T√™n: ${ten}');this.innerText='ƒê√£ copy!';setTimeout(()=>this.innerText='Copy m√£',1500)" style="padding:7px 18px;border-radius:6px;background:#eee;border:none;cursor:pointer;">Copy m√£</button>`;
      // So·∫°n ƒë√∫ng m·∫´u: Shop ∆°i m√¨nh mu·ªën ƒë·∫∑t s·∫£n ph·∫©m "MS"
      const messText = encodeURIComponent(`Shop ∆°i m√¨nh mu·ªën ƒë·∫∑t s·∫£n ph·∫©m "${ms}"`);
      document.getElementById('popup-mess').href =
        `https://m.me/thuhien18102?text=${messText}`;
    }
    function closeOrderPopup() {
      document.getElementById('order-popup').style.display = 'none';
    }

    // Kh·ªüi t·∫°o
    fetch(jsonUrl)
      .then(response => {
        if (!response.ok) throw new Error('Kh√¥ng l·∫•y ƒë∆∞·ª£c file JSON');
        return response.json();
      })
      .then(data => {
        dataAll = data;
        classifyProducts();
        renderCatalogue();
        showCatalogue();
        showFeaturedProducts();
        renderTestimonials();
      })
      .catch(error => {
        document.getElementById('catalogue').innerText = 'L·ªói: ' + error.message;
      });
  </script>
</body>
</html>
